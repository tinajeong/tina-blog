---
title: 'Typescript ìƒ˜í”Œ í”„ë¡œì íŠ¸'
thumbSrc: '/static/images/typescript.webp'
date: '2022-07-16'
tags: ['typescript']
draft: false
summary: 'Maximilian SchwarzmÃ¼llerì˜ ê°•ì˜ë¥¼ ë“¤ìœ¼ë©° ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.'
images: ['/static/images/typescript.webp']
---

# ğŸ“Œ ëª©ì°¨

![typescript](/static/images/typescript.webp)

---

## TypeScriptì˜ HTMLElement
`HTMLElement`ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ì¡´ì¬í•˜ëŠ” ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ë¡œ, ê°ì¢… element, node, event listener ë“¤ì´ `HTMLElement`ì˜ êµ¬í˜„ì²´ì´ë‹¤.
íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ê°ì¢… html elementsë¥¼ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì •ì˜í•´ë‘ì—ˆë‹¤.

```typescript
templateElement: HTMLTemplateElement;
hostElement: HTMLDivElement;
element: HTMLFormElement;
```
> [íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ DOM API](https://github.com/microsoft/TypeScript/blob/main/lib/lib.dom.d.ts)

## thisì˜ ë§¥ë½ê³¼ Autobind
configure í•¨ìˆ˜ì—ì„œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•˜ê³ , `this.submitHandler` ë©”ì†Œë“œë¥¼ ì¸ìë¡œ ë„˜ê¸´ë‹¤. 
ì•„ë¬´ëŸ° ì„¤ì •ì´ ì—†ë‹¤ë©´ `submitHandler` êµ¬í˜„ë¶€ì—ì„œì˜ thisëŠ” ProjectInput í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë‹¤. ì´ë²¤íŠ¸ê°€ ë°œìƒë˜ì–´ í˜¸ì¶œëœ ì‹œì ì—ì„œëŠ” eventê°€ thisê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
ê·¸ë˜ì„œ ë§¤í•‘ë˜ëŠ” thisë¥¼ bindí•¨ìˆ˜ë§Œ ì‚¬ìš©í•˜ê±°ë‚˜ ë°ì½”ë ˆì´í„°ë„ ì‚¬ìš©í•´ ë³€ê²½í•´ì£¼ì–´ì•¼ í•œë‹¤.
```typescript
// autobind decorator
function autobind(
  _: any, // ì‚¬ìš©í•˜ì§€ ì•Šì„ íŒŒë¼ë¯¸í„°
  _2: string, // ì‚¬ìš©í•˜ì§€ ì•Šì„ íŒŒë¼ë¯¸í„° 2
  descriptor: PropertyDescriptor
) {
  const originalMethod = descriptor.value;
  const adjDescriptor: PropertyDescriptor = {
    configurable: true,
    get() {
      const boundFn = originalMethod.bind(this);
      return boundFn; // bind ëŒ€ìƒ ë³€ê²½
    }
  };
  return adjDescriptor;
}
...
@autobind
private submitHandler(event: Event) {
    event.preventDefault();
    console.log(this.titleInputElement.value);
}

private configure() {
    this.element.addEventListener('submit', this.submitHandler);
}
```

## ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Input Validation 
ì•„ë˜ëŠ” `Validatable`ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³ , í•´ë‹¹ íƒ€ì…ì„ ì¸ìë¡œ ë°›ëŠ” validate í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ ì‚¬ìš©ì ì…ë ¥ì— ëŒ€í•œ ê²€ì¦ë¡œì§ì„ í†µì¼í•˜ê³  ì¼ë°˜í™”í•œ ì½”ë“œì´ë‹¤.
```typescript
// Validation
interface Validatable {
  value: string | number;
  required?: boolean;
  minLength?: number;
  maxLength?: number;
  min?: number;
  max?: number;
}

function validate(validatableInput: Validatable) {
  let isValid = true;
  if (validatableInput.required) {
    isValid = isValid && validatableInput.value.toString().trim().length !== 0;
  }
  if (
    validatableInput.minLength != null &&
    typeof validatableInput.value === 'string'
  ) {
    isValid =
      isValid && validatableInput.value.length >= validatableInput.minLength;
  }
  if (
    validatableInput.maxLength != null &&
    typeof validatableInput.value === 'string'
  ) {
    isValid =
      isValid && validatableInput.value.length <= validatableInput.maxLength;
  }
  if (
    validatableInput.min != null &&
    typeof validatableInput.value === 'number'
  ) {
    isValid = isValid && validatableInput.value >= validatableInput.min;
  }
  if (
    validatableInput.max != null &&
    typeof validatableInput.value === 'number'
  ) {
    isValid = isValid && validatableInput.value <= validatableInput.max;
  }
  return isValid;
}
```
ìœ„ì™€ ê°™ì´ í•´ë‘ë©´, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì…ì¥ì—ì„œëŠ” ì¶”ìƒí™”ë˜ê³  ê¹”ë”í•œ ë°©ì‹ìœ¼ë¡œ ê²€ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
```typescript
const titleValidatable: Validatable = {
    value: enteredTitle,
    required: true
};
const descriptionValidatable: Validatable = {
    value: enteredDescription,
    required: true,
    minLength: 5
};
const peopleValidatable: Validatable = {
    value: +enteredPeople,
    required: true,
    min: 1,
    max: 5
};

if (
    !validate(titleValidatable) ||
    !validate(descriptionValidatable) ||
    !validate(peopleValidatable)
) {
    alert('Invalid input, please try again!');
    return;
} else {
    return [enteredTitle, enteredDescription, +enteredPeople];
}
```

## ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ìƒíƒœê´€ë¦¬í•˜ê¸°
```typescript
enum ProjectStatus {
  Active,
  Finished
}

class Project {
  constructor(
    public id: string,
    public title: string,
    public description: string,
    public people: number,
    public status: ProjectStatus
  ) {}
}

type Listener = (items: Project[]) => void;

class ProjectState {
  private listeners: Listener[] = [];
  private projects: Project[] = [];
  private static instance: ProjectState;

  private constructor() {}

  static getInstance() { // ê°ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ë•Œë§Œ ìƒì„±í•´ ë¦¬í„´
    if (this.instance) {
      return this.instance;
    }
    this.instance = new ProjectState();
    return this.instance;
  }

  addListener(listenerFn: Listener) {
    this.listeners.push(listenerFn);
  }

  addProject(title: string, description: string, numOfPeople: number) {
    const newProject = new Project(
      Math.random().toString(),
      title,
      description,
      numOfPeople,
      ProjectStatus.Active // defaultëŠ” active
    );
    this.projects.push(newProject);
    for (const listenerFn of this.listeners) {
      listenerFn(this.projects.slice()); // deep copy
    }
  }
}

const projectState = ProjectState.getInstance();

```
## References
- https://typescript-kr.github.io/pages/tutorials/dom-manipulation.html
- https://developer.mozilla.org/ko/docs/Web/API/HTMLElement
- https://stackoverflow.com/questions/597588/how-do-you-clone-an-array-of-objects-in-javascript
